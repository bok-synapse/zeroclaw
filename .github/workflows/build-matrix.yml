name: Build zeroclaw (channel-matrix, x86_64-unknown-linux-gnu)  
  
on:  
  workflow_dispatch:  
  push:  
    branches: [main]  
  
permissions:  
  contents: read  
  
env:  
  CARGO_TERM_COLOR: always  
  
jobs:  
  build:  
    name: Build zeroclaw (x86_64-unknown-linux-gnu, channel-matrix)  
    runs-on: ubuntu-latest  
    timeout-minutes: 40  
    steps:  
      - uses: actions/checkout@34e114876b0b11c390a56381ad16ebd13914f8d5 # v4  
  
      - uses: dtolnay/rust-toolchain@631a55b12751854ce901bb631d5902ceb48146f7 # stable  
        with:  
          toolchain: 1.92.0  
          targets: x86_64-unknown-linux-gnu  
  
      - uses: useblacksmith/rust-cache@f53e7f127245d2a269b3d90879ccf259876842d5 # v3  
  
      - name: Build release binary  
        shell: bash  
        run: |  
          cargo build --profile release-fast --locked --features channel-matrix --target x86_64-unknown-linux-gnu
  
      - name: Package binary  
        run: |  
          cd target/x86_64-unknown-linux-gnu/release-fast  
          tar czf ../../../zeroclaw-x86_64-unknown-linux-gnu.tar.gz zeroclaw  
  
      - name: Upload artifact  
        uses: actions/upload-artifact@b7c566a772e6b6bfb58ed0dc250532a479d7789f # v6  
        with:  
          name: zeroclaw-x86_64-unknown-linux-gnu  
          path: zeroclaw-x86_64-unknown-linux-gnu.tar.gz  
          retention-days: 7
